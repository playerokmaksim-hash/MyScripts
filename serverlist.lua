local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- –°–æ–∑–¥–∞–µ–º GUI
local ScreenGui = Instance.new("ScreenGui")
local CircleFrame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")

-- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º GUI
ScreenGui.Parent = playerGui
ScreenGui.Name = "CircleToWindowGUI"
ScreenGui.ResetOnSpawn = false

-- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫—Ä—É–≥
CircleFrame.Size = UDim2.new(0, 70, 0, 70)
CircleFrame.Position = UDim2.new(0, 100, 0, 100)
CircleFrame.AnchorPoint = Vector2.new(0.5, 0.5)
CircleFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
CircleFrame.BorderSizePixel = 0
CircleFrame.Parent = ScreenGui

-- –î–µ–ª–∞–µ–º –∫—Ä—É–≥
UICorner.CornerRadius = UDim.new(1, 0)
UICorner.Parent = CircleFrame
CircleFrame.BackgroundTransparency = 0

-- –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –∫—Ä—É–≥
local Label = Instance.new("TextLabel")
Label.Size = UDim2.new(1, 0, 1, 0)
Label.Text = "–û—Ç–∫—Ä—ã—Ç—å"
Label.TextColor3 = Color3.fromRGB(0, 0, 0)
Label.BackgroundTransparency = 1
Label.TextScaled = true
Label.Font = Enum.Font.SourceSansBold
Label.Parent = CircleFrame

-- –°–æ–∑–¥–∞–µ–º —Å–∏–Ω–µ–µ –æ–∫–Ω–æ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–æ)
local BlueWindow = Instance.new("Frame")
BlueWindow.Size = UDim2.new(0, 500, 0, 400)
BlueWindow.Position = UDim2.new(0.5, -250, 0.5, -200)
BlueWindow.AnchorPoint = Vector2.new(0.5, 0.5)
BlueWindow.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
BlueWindow.BackgroundTransparency = 0.7
BlueWindow.BorderSizePixel = 2
BlueWindow.BorderColor3 = Color3.fromRGB(0, 0, 150)
BlueWindow.Visible = false
BlueWindow.Parent = ScreenGui

-- –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω—É —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
local WindowTitle = Instance.new("TextLabel")
WindowTitle.Size = UDim2.new(1, 0, 0, 40)
WindowTitle.Text = "–ú–µ–Ω—é —Å–µ—Ä–≤–µ—Ä–æ–≤ (–ø–µ—Ä–µ—Ç–∞—â–∏)"
WindowTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
WindowTitle.BackgroundColor3 = Color3.fromRGB(0, 0, 100)
WindowTitle.BorderSizePixel = 0
WindowTitle.Font = Enum.Font.SourceSansBold
WindowTitle.TextSize = 20
WindowTitle.Parent = BlueWindow

-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 120, 0, 40)
CloseButton.Position = UDim2.new(0.5, -60, 1, -50)
CloseButton.Text = "–ó–∞–∫—Ä—ã—Ç—å"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
CloseButton.BorderSizePixel = 0
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextSize = 18
CloseButton.Parent = BlueWindow

-- –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤
local RefreshButton = Instance.new("TextButton")
RefreshButton.Size = UDim2.new(0, 120, 0, 40)
RefreshButton.Position = UDim2.new(0.5, -60, 1, -100)
RefreshButton.Text = "üîÑ –û–±–Ω–æ–≤–∏—Ç—å"
RefreshButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RefreshButton.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
RefreshButton.BorderSizePixel = 0
RefreshButton.Font = Enum.Font.SourceSansBold
RefreshButton.TextSize = 18
RefreshButton.Parent = BlueWindow

-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
local ServersContainer = Instance.new("ScrollingFrame")
ServersContainer.Size = UDim2.new(0.9, 0, 0.7, 0)
ServersContainer.Position = UDim2.new(0.05, 0, 0.15, 0)
ServersContainer.BackgroundTransparency = 1
ServersContainer.BorderSizePixel = 0
ServersContainer.ScrollBarThickness = 8
ServersContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
ServersContainer.AutomaticCanvasSize = Enum.AutomaticSize.Y
ServersContainer.Parent = BlueWindow

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 5)
UIListLayout.Parent = ServersContainer

-- –ö–≤–∞–¥—Ä–∞—Ç–∏–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
local ResizeButton = Instance.new("TextButton")
ResizeButton.Size = UDim2.new(0, 20, 0, 20)
ResizeButton.Position = UDim2.new(1, -25, 1, -25)
ResizeButton.Text = "‚ÜîÔ∏è"
ResizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ResizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 150)
ResizeButton.BorderSizePixel = 1
ResizeButton.BorderColor3 = Color3.fromRGB(255, 255, 255)
ResizeButton.TextSize = 12
ResizeButton.ZIndex = 2
ResizeButton.Parent = BlueWindow

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
local resizing = false
local startSize
local startPosition

-- –†–∞–∑–º–µ—Ä—ã –æ–∫–Ω–∞
local MIN_SIZE = UDim2.new(0, 400, 0, 300)
local MAX_SIZE = UDim2.new(0, 1200, 0, 800)

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
local circleDragging = false
local circleDragInput
local circleDragStart
local circleStartPos
local windowDragging = false
local windowDragInput
local windowDragStart
local windowStartPos

-- –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û–¢ ID –ù–ê –†–ï–ê–õ–¨–ù–´–ô ID –ò–ì–†–´ "STEAL A BRAINROT"!
-- –ù–∞–π—Ç–∏ ID –º–æ–∂–Ω–æ –≤ URL –∏–≥—Ä—ã: https://www.roblox.com/games/123456789/Game-Name
local GAME_ID = 109983668079237  -- –≠—Ç–æ –ø—Ä–∏–º–µ—Ä, –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä–≤–µ—Ä–∞—Ö
local function getServers()
    local success, result = pcall(function()
        local url = "https://games.roblox.com/v1/games/" .. GAME_ID .. "/servers/Public?limit=100"
        local response = game:HttpGet(url)
        return HttpService:JSONDecode(response)
    end)
    
    if success and result and result.data then
        return result.data
    else
        warn("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤: ", result)
        return {}
    end
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
local function createServerButton(server, index)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, 50)
    button.Text = ""
    button.BackgroundColor3 = Color3.fromRGB(30, 30, 100)
    button.BorderSizePixel = 1
    button.BorderColor3 = Color3.fromRGB(100, 100, 200)
    button.AutoButtonColor = false
    
    local playersText = Instance.new("TextLabel")
    playersText.Size = UDim2.new(0.3, 0, 1, 0)
    playersText.Position = UDim2.new(0.7, 0, 0, 0)
    playersText.Text = server.playing .. "/" .. server.maxPlayers
    playersText.TextColor3 = Color3.fromRGB(255, 255, 255)
    playersText.BackgroundTransparency = 1
    playersText.Font = Enum.Font.SourceSansBold
    playersText.TextSize = 16
    playersText.TextXAlignment = Enum.TextXAlignment.Right
    playersText.Parent = button
    
    local serverText = Instance.new("TextLabel")
    serverText.Size = UDim2.new(0.6, 0, 1, 0)
    serverText.Text = "–°–µ—Ä–≤–µ—Ä #" .. index
    serverText.TextColor3 = Color3.fromRGB(255, 255, 255)
    serverText.BackgroundTransparency = 1
    serverText.Font = Enum.Font.SourceSansBold
    serverText.TextSize = 16
    serverText.TextXAlignment = Enum.TextXAlignment.Left
    serverText.Parent = button
    
    -- –¶–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–Ω–ª–∞–π–Ω–∞
    if server.playing >= server.maxPlayers - 2 then
        button.BackgroundColor3 = Color3.fromRGB(100, 0, 0) -- –ü–æ–ª–Ω—ã–π
        playersText.TextColor3 = Color3.fromRGB(255, 100, 100)
    elseif server.playing >= server.maxPlayers / 2 then
        button.BackgroundColor3 = Color3.fromRGB(100, 100, 0) -- –°—Ä–µ–¥–Ω–∏–π
        playersText.TextColor3 = Color3.fromRGB(255, 255, 100)
    else
        button.BackgroundColor3 = Color3.fromRGB(0, 100, 0) -- –ü—É—Å—Ç–æ–π
        playersText.TextColor3 = Color3.fromRGB(100, 255, 100)
    end
    
    -- –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = button.BackgroundColor3 + Color3.fromRGB(30, 30, 30)
    end)
    
    button.MouseLeave:Connect(function()
        if server.playing >= server.maxPlayers - 2 then
            button.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        elseif server.playing >= server.maxPlayers / 2 then
            button.BackgroundColor3 = Color3.fromRGB(100, 100, 0)
        else
            button.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
        end
    end)
    
    -- –§—É–Ω–∫—Ü–∏—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞
    button.MouseButton1Click:Connect(function()
        print("üöÄ –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä #" .. index)
        TeleportService:TeleportToPlaceInstance(GAME_ID, server.id, player)
    end)
    
    return button
end

-- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
local function updateServerList()
    -- –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    for _, child in ipairs(ServersContainer:GetChildren()) do
        if child:IsA("TextButton") or child:IsA("TextLabel") then
            child:Destroy()
        end
    end
    
    local loadingText = Instance.new("TextLabel")
    loadingText.Size = UDim2.new(1, 0, 0, 30)
    loadingText.Text = "üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤..."
    loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
    loadingText.BackgroundTransparency = 1
    loadingText.Font = Enum.Font.SourceSansBold
    loadingText.TextSize = 16
    loadingText.Parent = ServersContainer
    
    -- –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏
    task.wait(0.5)
    
    local servers = getServers()
    loadingText:Destroy()
    
    if #servers == 0 then
        local noServers = Instance.new("TextLabel")
        noServers.Size = UDim2.new(1, 0, 0, 50)
        noServers.Text = "‚ùå –°–µ—Ä–≤–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID –∏–≥—Ä—ã!"
        noServers.TextColor3 = Color3.fromRGB(255, 100, 100)
        noServers.BackgroundTransparency = 1
        noServers.Font = Enum.Font.SourceSansBold
        noServers.TextSize = 16
        noServers.TextWrapped = true
        noServers.Parent = ServersContainer
        return
    end
    
    -- –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ 6 —Å–µ—Ä–≤–µ—Ä–æ–≤
    local brainrotServers = {}
    for i = 1, math.min(6, #servers) do
        table.insert(brainrotServers, servers[i])
    end
    
    -- –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
    for i, server in ipairs(brainrotServers) do
        local button = createServerButton(server, i)
        button.Parent = ServersContainer
    end
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞
local function toggleWindow()
    if BlueWindow.Visible then
        BlueWindow.Visible = false
        CircleFrame.Visible = true
    else
        BlueWindow.Visible = true
        CircleFrame.Visible = false
        updateServerList()
    end
end

-- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –∫—Ä—É–≥–∞
local function updateCirclePosition(input)
    local delta = input.Position - circleDragStart
    CircleFrame.Position = UDim2.new(
        circleStartPos.X.Scale, 
        circleStartPos.X.Offset + delta.X,
        circleStartPos.Y.Scale, 
        circleStartPos.Y.Offset + delta.Y
    )
end

-- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –æ–∫–Ω–∞
local function updateWindowPosition(input)
    local delta = input.Position - windowDragStart
    BlueWindow.Position = UDim2.new(
        windowStartPos.X.Scale, 
        windowStartPos.X.Offset + delta.X,
        windowStartPos.Y.Scale, 
        windowStartPos.Y.Offset + delta.Y
    )
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
local function updateWindowSize(input)
    if not resizing then return end
    
    local mousePos = input.Position
    local delta = mousePos - startPosition
    
    local newWidth = math.clamp(startSize.X.Offset + delta.X, MIN_SIZE.X.Offset, MAX_SIZE.X.Offset)
    local newHeight = math.clamp(startSize.Y.Offset + delta.Y, MIN_SIZE.Y.Offset, MAX_SIZE.Y.Offset)
    
    BlueWindow.Size = UDim2.new(0, newWidth, 0, newHeight)
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
ResizeButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        resizing = true
        startPosition = input.Position
        startSize = BlueWindow.Size
        ResizeButton.BackgroundColor3 = Color3.fromRGB(100, 100, 200)
    end
end)

ResizeButton.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        resizing = false
        ResizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 150)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement and resizing then
        updateWindowSize(input)
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫—Ä—É–≥–∞
CircleFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        if not circleDragging then
            task.wait(0.2)
            if not circleDragging then
                toggleWindow()
            end
        end
    end
end)

CircleFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        circleDragInput = input
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∫—Ä—É–≥–∞
UserInputService.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local mousePos = input.Position
        local circlePos = CircleFrame.AbsolutePosition
        local circleSize = CircleFrame.AbsoluteSize
        
        if mousePos.X >= circlePos.X and mousePos.X <= circlePos.X + circleSize.X and
           mousePos.Y >= circlePos.Y and mousePos.Y <= circlePos.Y + circleSize.Y then
           
            circleDragging = true
            circleDragStart = input.Position
            circleStartPos = CircleFrame.Position
            CircleFrame.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
        end
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        circleDragging = false
        CircleFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == circleDragInput and circleDragging then
        updateCirclePosition(input)
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –æ–∫–Ω–∞
WindowTitle.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        windowDragging = true
        windowDragStart = input.Position
        windowStartPos = BlueWindow.Position
    end
end)

WindowTitle.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        windowDragInput = input
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        windowDragging = false
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == windowDragInput and windowDragging then
        updateWindowPosition(input)
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è
CloseButton.MouseButton1Click:Connect(function()
    toggleWindow()
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
RefreshButton.MouseButton1Click:Connect(function()
    updateServerList()
    print("üîÑ –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω!")
end)
